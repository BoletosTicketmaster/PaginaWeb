<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticketmaster SafeTix‚Ñ¢ -App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define la fuente Inter (necesaria para el estilo definido en el c√≥digo) */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        .font-['Inter'] {
            font-family: 'Inter', sans-serif;
        }

        /* Estilo para simular el borde degradado de la cabecera */
        .header-bg {
            background-color: #000000; /* Fondo negro */
        }
    </style>
</head>
<body class="bg-neutral-100">

    <div id="root">
        </div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        // IMPORTANTE: Todo el c√≥digo React/JSX debe ir dentro de este script con type="text/babel"

        const { useState, useEffect, useCallback } = React;

        // --- DATA INICIAL DE BOLETOS ---
        const initialTickets = [
            { id: 1, title: "Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025", section: "NA-19", row: "14", seat: "12", date: "12 Dic 2025", venue: "Estadio GNP Seguros ‚Ä¢ Ciudad de M√©xico", time: "9:00 PM", transferred: false,
            thumbnail: "https://i.imgur.com/g2mDjyC.jpeg",
            fullImage: "https://i.imgur.com/ucA8GGo.jpeg" },
            { id: 2, title: "Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025", section: "NA-19", row: "14", seat: "13", date: "12 Dic 2025", venue: "Estadio GNP Seguros ‚Ä¢ Ciudad de M√©xico", time: "9:00 PM", transferred: false,
            thumbnail: "https://i.imgur.com/g2mDjyC.jpeg",
            fullImage: "https://i.imgur.com/ucA8GGo.jpeg" },
            { id: 3, title: "Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025", section: "GRAL-B", row: "G8", seat: "-", date: "20 Dic 2025", venue: "Estadio GNP Seguros ‚Ä¢ Ciudad de M√©xico", time: "9:00 PM", transferred: false,
            thumbnail: "https://i.imgur.com/g2mDjyC.jpeg",
            fullImage: "https://i.imgur.com/ucA8GGo.jpeg" },
            { id: 4, title: "Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025", section: "GRAL-B", row: "G8", seat: "-", date: "20 Dic 2025", venue: "Estadio GNP Seguros ‚Ä¢ Ciudad de M√©xico", time: "9:00 PM", transferred: true,
            thumbnail: "https://i.imgur.com/g2mDjyC.jpeg",
            fullImage: "https://i.imgur.com/ucA8GGo.jpeg" }
        ];

        const appTabs = [
            { id: "entradas", name: "Entradas" },
            { id: "pase-lote", name: "Pase de Lote" },
            { id: "informacion", name: "Informaci√≥n" },
            { id: "fechas", name: "Fechas" },
            { id: "artista", name: "Artista" },
            { id: "mi-cuenta", name: "Mi Cuenta" } 
        ];

        // Datos simulados del usuario
        const mockUser = {
            name: "Victor Hugo Tovar Vergara",
            email: "tovarvergara85@gmail.com",
            memberSince: "Miembro desde 2015",
            membership: "Fan Premium",
            avatar: "https://placehold.co/128x128/3b82f6/ffffff?text=VT"
        };


        // --- COMPONENTES AUXILIARES ---

        // Funci√≥n para generar la URL del c√≥digo QR din√°mico
        const getQrUrl = (ticketId, seat, qrToken) => {
            const data = `TICKET-${ticketId}-${seat}-${qrToken}`;
            const colorChange = Math.floor(Math.random() * 4);
            const colors = ['ffffff', 'f9f9f9', 'f0f0f0', 'e9e9e9'];
            return `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${data}&bgcolor=${colors[colorChange]}`;
        };

        // Componente para el C√≥digo QR din√°mico
        const DynamicQrCode = ({ ticket, qrToken, isBatchPass = false }) => {
            const qrUrl = getQrUrl(ticket.id, ticket.seat, qrToken);
            
            // CSS de la animaci√≥n inyectado directamente en el componente para asegurar su carga
            const animationStyles = ` 
                @keyframes slide-x {
                    0% { transform: translateX(-100%) skewX(-30deg); }
                    50% { transform: translateX(300%) skewX(-30deg); }
                    100% { transform: translateX(-100%) skewX(-30deg); }
                }
                .qr-scanner-line-large {
                    animation: slide-x 1.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
                }
                .qr-scanner-line-small {
                    animation: slide-x 1.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
                }
            `;

            if (isBatchPass) {
                return (
                    <div className="flex flex-col items-center justify-center p-0.5">
                        <div className="w-28 h-28 bg-white p-1 rounded-md border border-gray-100 shadow-md relative overflow-hidden transition duration-500 ease-in-out">
                            {/* Imagen del QR */}
                            <img
                                src={qrUrl}
                                alt="C√≥digo QR Din√°mico"
                                className="w-full h-full mix-blend-multiply"
                            />
                            {/* L√≠nea de escaneo animada */}
                            <div className="absolute top-0 left-0 h-full w-1/3 bg-blue-500 opacity-60 qr-scanner-line-small"></div>
                        </div>
                        <style>{animationStyles}</style>
                    </div>
                );
            }

            // Estilo para la vista de boleto individual (Modal)
            return (
                <div className="flex flex-col items-center justify-center p-6 bg-white border border-gray-200 rounded-md shadow-lg">
                    <h4 className="text-lg font-semibold mb-4 text-gray-800">C√ìDIGO DE ACCESO DIN√ÅMICO</h4>
                    <div className="w-48 h-48 bg-white p-2 rounded-lg border border-gray-100 shadow-xl relative overflow-hidden transition duration-500 ease-in-out">
                        {/* Imagen del QR */}
                        <img
                            src={qrUrl}
                            alt="C√≥digo QR Din√°mico"
                            className="w-full h-full mix-blend-multiply"
                        />
                        {/* L√≠nea de escaneo animada */}
                        <div className="absolute top-0 left-0 h-full w-1/3 bg-blue-500 opacity-60 qr-scanner-line-large"></div>
                    </div>
                    <p className="text-xs text-red-500 font-bold mt-4">¬°C√ìDIGO DIN√ÅMICO!</p>
                    <p className="text-sm font-semibold text-gray-700 mt-1"></p>
                    <p className="text-[10px] text-gray-500 mt-1">Ticketmaster SafeTix‚Ñ¢</p>
                    <style>{animationStyles}</style>
                </div>
            );
        };

        // Componente del Modal (Vista de Boleto)
        const ViewModalContent = ({ ticket, closeModal, qrToken }) => (
            <div>
                <h3 className="text-center font-bold text-xl text-blue-700 pt-2 mb-4">¬°Tu Entrada!</h3>

                {/* 1. SECCI√ìN DE INFORMACI√ìN DEL ASIENTO */}
                <div className="w-full bg-blue-600 text-white text-center py-5 rounded-md mb-3 mt-4 shadow-lg shadow-blue-200">
                    <div className="grid grid-cols-3 gap-4">
                        <div><p className="text-xs opacity-80">SEC</p><p className="text-lg font-bold">{ticket.section}</p></div>
                        <div><p className="text-xs opacity-80">FILA</p><p className="text-lg font-bold">{ticket.row}</p></div>
                        <div><p className="text-xs opacity-80">ASIENTO</p><p className="text-lg font-bold">{ticket.seat}</p></div>
                    </div>
                </div>

                {/* 2. IMAGEN DEL EVENTO */}
                <div className="w-full h-32 overflow-hidden rounded-md my-4 shadow-lg">
                    <img
                        src={ticket.fullImage}
                        alt="Imagen del Evento"
                        className="w-full h-full object-cover"
                        onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/400x128/2563eb/ffffff?text=EVENTO+IMAGE'; }}
                    />
                </div>

                {/* 3. SECCI√ìN DEL C√ìDIGO QR DIN√ÅMICO */}
                <DynamicQrCode ticket={ticket} qrToken={qrToken} />

                <div className="mt-4 flex justify-center">
                    <button onClick={closeModal} className="bg-gray-200 text-gray-800 px-6 py-2.5 rounded-md font-medium hover:bg-gray-300 transition w-full">Cerrar vista</button>
                </div>
            </div>
        );

        // Componente del Modal (Transferencia)
        const TransferModalContent = ({ ticket, closeModal, handleTransfer }) => {
            const handleSubmit = (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const data = Object.fromEntries(formData.entries());

                handleTransfer(data);
            };

            return (
                <form onSubmit={handleSubmit}>
                    <p className="text-center font-bold text-blue-700 mb-4 text-xl mt-2">Transferir boleto</p>

                    <div className="bg-blue-50 border border-blue-100 rounded-lg p-3 mb-4 text-sm flex gap-3 items-start">
                        <img
                            src={ticket.thumbnail}
                            alt="thumbnail"
                            className="w-16 h-16 object-cover rounded bg-gray-200"
                            onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/64x64/2563eb/ffffff?text=BB'; }}
                        />
                        <div>
                            <p className="font-bold text-gray-900">{ticket.title}</p>
                            <p className="text-xs text-gray-600 mt-1">{ticket.date} ‚Ä¢ {ticket.time}</p>
                            <p className="text-xs font-semibold text-blue-700 mt-1">SEC {ticket.section} ‚Ä¢ FILA {ticket.row} ‚Ä¢ Asiento {ticket.seat}</p>
                        </div>
                    </div>

                    <div className="text-xs text-gray-500 mb-4 px-1">Ingresa los datos del destinatario. Una vez transferido, perder√°s acceso a este boleto y √©l recibir√° un correo para aceptarlo.</div>

                    <div className="space-y-3">
                        <div className="grid grid-cols-2 gap-3">
                            <input name="firstName" placeholder="Nombre" required className="w-full border border-gray-300 rounded-md p-2.5 focus:ring-2 focus:ring-blue-500 outline-none text-sm" />
                            <input name="apellidoP" placeholder="Apellido Paterno" required className="w-full border border-gray-300 rounded-md p-2.5 focus:ring-2 focus:ring-blue-500 outline-none text-sm" />
                        </div>
                        <input name="apellidoM" placeholder="Apellido Materno" required className="w-full border border-gray-300 rounded-md p-2.5 focus:ring-2 focus:ring-blue-500 outline-none text-sm" />
                        <input type="email" name="transferEmail" placeholder="Correo electr√≥nico del destinatario" required className="w-full border border-gray-300 rounded-md p-2.5 focus:ring-2 focus:ring-blue-500 outline-none text-sm" />
                    </div>

                    <div className="mt-6 flex gap-3">
                        <button type="submit" className="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2.5 rounded-md font-semibold transition shadow-md shadow-blue-300">Transferir ahora</button>
                        <button type="button" onClick={closeModal} className="flex-1 bg-white border border-gray-300 text-gray-700 py-2.5 rounded-md font-medium hover:bg-gray-50 transition">Cancelar</button>
                    </div>
                </form>
            );
        };

        // Componente para una tarjeta de boleto individual
        const TicketCard = ({ t, openModal }) => {
            const isTransferred = t.transferred;
            const cardClasses = isTransferred ? 'opacity-60 bg-gray-50' : 'hover:shadow-lg cursor-pointer';

            return (
                <div className={`bg-white rounded-xl shadow-md p-4 flex items-center gap-4 transition-transform duration-300 hover:scale-105 ${cardClasses}`}>
                    <img
                        src={t.thumbnail}
                        alt={t.title}
                        className="w-20 h-20 object-cover rounded-md border"
                        onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/80x80/2563eb/ffffff?text=BB'; }}
                    />

                    <div className="flex-1">
                        <p className="text-xs font-bold text-blue-700">SEC {t.section} ‚Ä¢ FILA {t.row} ‚Ä¢ ASIENTO {t.seat}</p>
                        <p className="text-sm font-semibold line-clamp-2">{t.title}</p>
                        <p className="text-xs opacity-70">{t.date} ‚Ä¢ {t.time}</p>
                        <p className="text-xs opacity-70">{t.venue}</p>
                        <div className="mt-1 flex gap-2 items-center">
                            {isTransferred && (
                                <span className="text-purple-600 text-xs font-bold border border-purple-200 bg-purple-50 px-2 py-0.5 rounded">TRANSFERIDO</span>
                            )}
                        </div>
                    </div>

                    <div className="flex flex-col gap-2 min-w-[85px]">
                        {isTransferred ? (
                            <div className="text-center space-y-2">
                                <span className="text-gray-500 text-sm font-semibold block px-2 py-1 rounded-md bg-gray-200 cursor-not-allowed">Ver boleto</span>
                                <span className="text-gray-500 text-sm font-medium block px-3 py-1 rounded-md bg-gray-200 cursor-not-allowed">Transferir</span>
                            </div>
                        ) : (
                            <>
                                <button onClick={() => openModal(t.id, 'view')} className="text-blue-600 text-sm font-semibold hover:bg-blue-50 py-1 rounded transition duration-150 ease-in-out">Ver boleto</button>
                                <button onClick={() => openModal(t.id, 'transfer')} className="bg-gray-100 text-sm px-3 py-1 rounded-md hover:bg-gray-200 transition text-gray-700 duration-150 ease-in-out">Transferir</button>
                            </>
                        )}
                    </div>
                </div>
            );
        };


        // --- COMPONENTE PRINCIPAL ---
        const App = () => {
            const [tickets, setTickets] = useState(initialTickets);
            const [activeTab, setActiveTab] = useState("entradas");
            const [modalState, setModalState] = useState({ isOpen: false, ticketId: null, mode: null });
            const [qrToken, setQrToken] = useState(() => Date.now().toString(36));
            const [toast, setToast] = useState({ message: '', isError: false, isVisible: false });

            // URL p√∫blica proporcionada por el usuario para el fondo del Pase de Lote
            const publicBatchImageUrl = "https://i.imgur.com/5njFO8P.jpeg"; 

            // Efecto para actualizar el token QR din√°mico cada 5 segundos
            useEffect(() => {
                const interval = setInterval(() => {
                    setQrToken(Date.now().toString(36) + Math.random().toString(36).substring(2));
                }, 5000);
                return () => clearInterval(interval);
            }, []);

            // Funci√≥n para mostrar la notificaci√≥n Toast
            const triggerToast = useCallback((message, isError = false) => {
                setToast({ message, isError, isVisible: true });
                setTimeout(() => {
                    setToast(prev => ({ ...prev, isVisible: false }));
                }, 3000);
            }, []);

            // Funciones para abrir y cerrar el modal
            const openModal = (id, mode = "view") => {
                const ticket = tickets.find(x => x.id === id);
                if (!ticket || ticket.transferred) {
                    triggerToast("Este boleto ya fue transferido. No puedes verlo ni transferirlo de nuevo.", true);
                    return;
                }
                setModalState({ isOpen: true, ticketId: id, mode });
            };

            const closeModal = () => {
                setModalState({ isOpen: false, ticketId: null, mode: null });
            };

            // Simula la l√≥gica de transferencia
            const handleTransfer = (formData) => {
                const { firstName, apellidoP, apellidoM, transferEmail } = formData;
                const ticketId = modalState.ticketId;
                const re = /^\S+@\S+\.\S+$/;

                if (!firstName || !apellidoP || !apellidoM || !transferEmail) {
                    triggerToast("Por favor completa todos los campos.", true);
                    return;
                }
                if (!re.test(transferEmail)) {
                    triggerToast("Por favor ingresa un correo v√°lido.", true);
                    return;
                }

                // Marca el boleto como transferido
                setTickets(prevTickets =>
                    prevTickets.map(t => t.id === ticketId ? { ...t, transferred: true } : t)
                );

                triggerToast("Boleto transferido correctamente ‚úì");
                closeModal();
            };

            // --- L√ìGICA DE RENDERIZADO DE PESTA√ëAS ---

            const renderEntradasTab = () => (
                <div className="grid gap-4">
                    {tickets.map(t => (
                        <TicketCard key={t.id} t={t} openModal={openModal} />
                    ))}
                </div>
            );

            const renderPaseDeLoteTab = () => {
                // Filtra solo los boletos que NO han sido transferidos
                const availableTickets = tickets.filter(t => !t.transferred);

                const content = availableTickets.length === 0 ? (
                    // Mensaje si no hay boletos activos
                    <div className="bg-white p-8 rounded-xl shadow-lg border-l-8 border-yellow-500 text-center">
                        <p className="text-2xl mb-3">üëã</p>
                        <h3 className="text-xl font-bold text-gray-800 mb-2">¬°Todos tus boletos han sido transferidos!</h3>
                        <p className="text-gray-600 text-sm">
                            Los boletos transferidos no aparecen en la vista "Pase de Lote" para evitar confusiones en la entrada.
                            <br/>
                            Puedes consultar su estado en la pesta√±a **Entradas** (con la etiqueta **TRANSFERIDO**).
                        </p>
                    </div>
                ) : (
                    // Grid de boletos activos
                    <div className="grid gap-4 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5">
                        {availableTickets.map((t) => {
                            const buttonClasses = 'bg-blue-600 hover:bg-blue-700 shadow-blue-300';

                            return (
                                // Card ajustada para ser m√°s delgada y elegante
                                <div key={t.id}
    className="bg-white rounded-xl shadow-lg flex flex-col items-center border-t-4 border-blue-600 h-full 
               transition-transform duration-300 hover:scale-105 hover:shadow-2xl overflow-hidden">
                                    {/* IMAGEN DE FONDO (Thumbnail del evento) - Usando la URL p√∫blica */}
                                    <div className="w-full h-16 relative mb-3">
                                        <img
                                            src={publicBatchImageUrl} // URL de imagen de fondo del pase de lote
                                            alt="Fondo de Evento"
                                            className="w-full h-full object-cover opacity-70"
                                            onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/100x64/2563eb/ffffff?text=EVENTO'; }}
                                        />
                                        <div className="absolute inset-0 bg-gradient-to-t from-white/70 to-transparent"></div> {/* Degradado para mejor legibilidad */}
                                    </div>

                                    <div className="w-full text-center mb-2 px-3 -mt-4">
                                        <p className="text-[10px] font-bold text-gray-400">TICKETMASTER SAFETIX‚Ñ¢</p>
                                        {/* T√≠tulo m√°s peque√±o */}
                                        <p className="text-sm font-bold line-clamp-2 mt-1 text-gray-900 leading-tight">{t.title}</p>
                                        <p className="text-xs font-semibold text-blue-700 mt-2">
                                            SEC {t.section} ‚Ä¢ FILA {t.row} ‚Ä¢ ASIENTO {t.seat}
                                        </p>
                                        <p className="text-[10px] opacity-70 mt-1 line-clamp-1">{t.date} | {t.venue}</p>
                                    </div>

                                    {/* Componente DynamicQrCode ajustado para vista de lote */}
                                    <div className="my-2 flex-shrink-0">
                                        <DynamicQrCode ticket={t} qrToken={qrToken} isBatchPass={true} />
                                    </div>
                                    
                                    <p className="text-xs text-red-500 font-bold mb-1">SafeTix‚Ñ¢</p>
                                    <p className="text-[8px] font-semibold text-gray-700 mb-3">No se permite ingresar con Captura de pantalla</p>
                                    {/* Bot√≥n ajustado para ser m√°s compacto */}
                                    <div className="w-full px-3 pb-3">
                                        <button onClick={() => openModal(t.id, 'transfer')} className={`mt-auto w-full text-white px-2 py-2 rounded-md text-sm font-semibold transition shadow-md ${buttonClasses}`}>Transferir</button>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                );

                // Leyenda para informar sobre los boletos transferidos
                const legend = (
                    <div className="mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200 text-center shadow-inner">
                        <p className="text-sm font-medium text-blue-800 flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
                            </svg>
                            <span>
                                Solo se muestran los boletos **Activos** y **No Transferidos**.
                                <span className="font-normal text-blue-700"> Consulta la pesta√±a "Entradas" para ver el estado de todos tus boletos, incluyendo los transferidos.</span>
                            </span>
                        </p>
                    </div>
                );

                return (
                    <>
                        {content}
                        {availableTickets.length > 0 && legend}
                    </>
                );
            };

            // Nuevo componente para la pesta√±a "Mi Cuenta"
            const renderMiCuentaTab = () => {
                const accountLinks = [
                    { icon: '‚öôÔ∏è', name: 'Configuraci√≥n de Perfil', description: 'Actualiza tu nombre, contrase√±a y preferencias.' },
                    { icon: 'üí≥', name: 'M√©todos de Pago', description: 'Gestiona tarjetas de cr√©dito y d√©bito.' },
                    { icon: 'üìç', name: 'Direcciones Guardadas', description: 'Administra tus domicilios de facturaci√≥n y env√≠o.' },
                    { icon: '‚ù§Ô∏è', name: 'Artistas Favoritos', description: 'Personaliza alertas y recomendaciones.' },
                    { icon: 'üîí', name: 'Privacidad y Seguridad', description: 'Revisa tus permisos y la seguridad de tu cuenta.' },
                ];

                return (
                    <div className="w-full mx-auto space-y-6">
                        {/* Cabecera del Perfil */}
                        <div className="flex flex-col items-center p-6 bg-white rounded-xl shadow-lg border-t-4 border-blue-600">
                            <img
                                src={mockUser.avatar}
                                alt="Avatar del Usuario"
                                className="w-24 h-24 rounded-full object-cover ring-4 ring-blue-100"
                            />
                            <h3 className="text-2xl font-bold mt-3 text-gray-900">{mockUser.name}</h3>
                            <p className="text-sm text-gray-500">{mockUser.email}</p>
                            <div className="flex gap-3 mt-3">
                                <span className="bg-blue-600 text-white text-xs font-semibold px-3 py-1 rounded-full shadow-md">
                                    {mockUser.membership}
                                </span>
                                <span className="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">
                                    {mockUser.memberSince}
                                </span>
                            </div>
                        </div>

                        {/* Opciones de Cuenta (Enlaces) */}
                        <div className="bg-white rounded-xl shadow-lg divide-y divide-gray-100">
                            {accountLinks.map((link, index) => (
                                <div
                                    key={index}
                                    className="flex items-center p-4 hover:bg-gray-50 transition cursor-pointer"
                                    onClick={() => triggerToast(`Abriendo ${link.name}...`)}
                                >
                                    <div className="text-2xl mr-4">{link.icon}</div>
                                    <div className="flex-1">
                                        <p className="font-semibold text-gray-800">{link.name}</p>
                                        <p className="text-xs text-gray-500">{link.description}</p>
                                    </div>
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M9 5l7 7-7 7" />
                                    </svg>
                                </div>
                            ))}
                        </div>

                        {/* Bot√≥n de Cierre de Sesi√≥n */}
                        <button 
                            onClick={() => triggerToast("¬°Sesi√≥n cerrada! Te extra√±aremos.", true)} 
                            className="w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-3 rounded-xl transition shadow-lg shadow-red-200"
                        >
                            Cerrar Sesi√≥n
                        </button>

                        <div className="text-center pt-2 text-xs text-gray-500">
                            Versi√≥n 3.5.1
                        </div>
                    </div>
                );
            };

            const renderSimulatedTab = () => {
                switch (activeTab) {
                    case "informacion":
                        return (
                            <div className="p-6 bg-white rounded-xl shadow">
                                <h2 className="text-xl font-semibold mb-3">Informaci√≥n del Evento</h2>
                                <ul className="text-sm text-gray-700 space-y-2 list-disc list-inside">
                                    <li>El acceso se abre a las 7:00 PM.</li>
                                    <li>Prohibido el acceso con c√°maras profesionales o tablets.</li>
                                    <li>Todos los boletos son SafeTix‚Ñ¢ y requieren escaneo digital.</li>
                                    <li>Usa la opci√≥n de "Transferir" si el boleto no es para tu uso.</li>
                                </ul>
                            </div>
                        );
                    case "fechas":
                        return (
                            <div className="p-6 bg-white rounded-xl shadow">
                                <h2 className="text-xl font-semibold mb-3">Fechas</h2>
                                <ul className="mt-3 text-sm text-gray-700 space-y-2">
                                    <li className="font-medium">üìç Ciudad de M√©xico ‚Äî Estadio GNP Seguros ‚Äî 15 Dic 2025 ‚Äî 9:00 PM</li>
                                    <li className="font-medium">üìç Ciudad de M√©xico ‚Äî Estadio GNP Seguros ‚Äî 19 Dic 2025 ‚Äî 9:00 PM</li>
                                    <li className="text-gray-500">üìç Monterrey ‚Äî Estadio BBVA ‚Äî 10 Ene 2026 ‚Äî 8:30 PM (Agotado)</li>
                                </ul>
                            </div>
                        );
                    case "artista":
                        return (
                            <div className="p-6 bg-white rounded-xl shadow">
                                <h2 className="text-xl font-semibold mb-3">Artista</h2>
                                <p className="text-sm text-gray-700">
                                    Bad Bunny, cuyo nombre real es Benito Antonio Mart√≠nez Ocasio, es un cantante, rapero y compositor puertorrique√±o.
                                    Se ha consolidado como uno de los artistas m√°s influyentes de la m√∫sica latina actual,
                                    rompiendo r√©cords mundiales con su estilo √∫nico que fusiona el trap latino, el reguet√≥n y el pop.
                                </p>
                            </div>
                        );
                    default:
                        return null;
                }
            };

            const renderAppContent = () => {
                switch (activeTab) {
                    case "entradas":
                        return renderEntradasTab();
                    case "pase-lote":
                        return renderPaseDeLoteTab();
                    case "mi-cuenta": // Manejo de la nueva pesta√±a
                        return renderMiCuentaTab();
                    default:
                        return renderSimulatedTab();
                }
            };

            const currentTicket = tickets.find(t => t.id === modalState.ticketId);
            let mainTitle = "Tus boletos individuales";
            if (activeTab === "pase-lote") {
                mainTitle = "Pase de Lote Digital (Acceso R√°pido)";
            } else if (activeTab === "mi-cuenta") {
                mainTitle = "Gesti√≥n de Cuenta y Perfil";
            } else if (activeTab !== "entradas") {
                mainTitle = "Detalles";
            }

            return (
                <div className="min-h-screen bg-neutral-100 text-black font-['Inter']">
                    {/* ---------------------------------- */}
                    {/* 1. Simulador de Barra de Navegador */}
                    {/* ---------------------------------- */}
                    <div className="w-full bg-neutral-900 text-white px-4 pt-2 pb-3 border-b border-neutral-800 
     select-none shadow-lg sticky top-0 z-50">
    
    <div className="flex items-center justify-between mb-2">
        <div className="flex items-center gap-2">
            <div className="w-3 h-3 bg-red-500 rounded-full cursor-pointer"></div>
            <div className="w-3 h-3 bg-yellow-500 rounded-full cursor-pointer"></div>
            <div className="w-3 h-3 bg-green-500 rounded-full cursor-pointer"></div>
        </div>
        <button className="px-3 py-1 text-xs bg-neutral-700/60 rounded hover:bg-neutral-600 transition">
            üåì Modo
        </button>
    </div>

    <div className="flex items-center gap-2 mb-2">
        <button className="px-2 py-1 text-lg hover:bg-neutral-700 rounded">‚Üê</button>
        <button className="px-2 py-1 text-lg hover:bg-neutral-700 rounded">‚Üí</button>
        <button className="px-2 py-1 text-lg hover:bg-neutral-700 rounded">‚ü≥</button>

        <div className="flex items-center bg-neutral-800 text-neutral-300 text-sm py-1 px-3 rounded-md w-full">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 text-green-400 mr-2" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                <path strokeLinecap="round" strokeLinejoin="round"
                      d="M12 15v2m-6-4h.01M5 10v2a1 1 0 001 1h12a1 1 0 001-1v-2h-.01"/>
            </svg>
            <span className="text-neutral-200">
                {`https://www.ticketmaster.com.mx/bad-bunny-boletos/artist/2317395/${activeTab}`}
            </span>
        </div>
    </div>

    <div className="flex items-center gap-2 overflow-x-auto pb-1">
        {appTabs.map(tab => (
            <div
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`flex items-center gap-2 px-4 py-1.5 rounded-t-lg cursor-pointer transition shadow-sm whitespace-nowrap text-sm ${
                    tab.id === activeTab 
                        ? "bg-neutral-800 text-white font-semibold" 
                        : "bg-neutral-700/40 text-neutral-300"
                }`}
            >
                {tab.name}
            </div>
        ))}
    </div>
</div>

                    {/* --------------------------- */}
                    {/* 2. Encabezado de la p√°gina */}
                    {/* --------------------------- */}
                    <header className="w-full header-bg text-white pb-6 shadow-md">
                        <div className="flex items-center justify-between p-4 md:px-5 border-b border-neutral-800 w-full mx-auto px-0">
                            <div className="text-xl font-extrabold text-blue-400 tracking-tight">Ticketmaster</div>
                            <div className="hidden sm:flex items-center bg-white/10 rounded-full px-3 py-1.5 w-full max-w-sm ml-8">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 text-gray-400 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                                    <path strokeLinecap="round" strokeLinejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                </svg>
                                <input type="text" placeholder="Buscar artistas, eventos..." className="bg-transparent text-sm text-white placeholder-gray-400 w-full focus:outline-none" readOnly />
                            </div>
                        </div>

                        {/* Imagen de banner y t√≠tulos superpuestos */}
                        <div className="relative">
                            <div className="w-full h-64 overflow-hidden">
                                <img
                                    src="https://i.imgur.com/g2mDjyC.jpeg"
                                    alt="banner"
                                    className="w-full h-full object-cover opacity-60"
                                    onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/1200x256/1e40af/ffffff?text=BAD+BUNNY+2025+TOUR'; }}
                                />
                                <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div> {/* Degradado para mejor contraste */}
                            </div>

                            <div className="w-full mx-auto px-0 px-4 md:px-5 absolute bottom-0 w-full -translate-y-6">
                                <h1 className="text-3xl sm:text-4xl font-extrabold mb-1 text-white drop-shadow-lg">
                                    Bad Bunny
                                </h1>
                                <p className="text-xl font-semibold text-neutral-200 mb-4">
                                    DeB√≠ TiRAR M√°S FOToS World Tour 2025
                                </p>
                                <div className="flex items-center text-sm font-medium text-neutral-300">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-1 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M8 7V3m8 4V3m-9 8h.01M16 11h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    15 DIC - 19 DIC
                                    <span className="mx-2">‚Ä¢</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-1 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0l-4.243-4.243a8 8 0 1111.314 0z" />
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M15 10a3 3 0 11-6 0 3 3 0 016 0z" />
                                    </svg>
                                    Estadio GNP Seguros
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* -------------------------- */}
                    {/* 3. Contenido Principal/Tabs */}
                    {/* -------------------------- */}
                    <main className="w-full mx-auto px-0 p-4 md:p-5">
                        <h2 className="text-2xl font-bold text-gray-900 mb-6 border-b border-gray-200 pb-2">
                            {mainTitle}
                        </h2>

                        {renderAppContent()}

                    </main>

                    {/* -------------------- */}
                    {/* 4. Modal Global */}
                    {/* -------------------- */}
                    {modalState.isOpen && currentTicket && (
                        <div className="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-start justify-center p-4 overflow-y-auto">
                            <div className="bg-white rounded-xl shadow-2xl p-6 w-full w-full my-8 relative transform transition-all duration-300 scale-100 ease-out">
                                <button onClick={closeModal} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>

                                {modalState.mode === 'view' && (
                                    <ViewModalContent ticket={currentTicket} closeModal={closeModal} qrToken={qrToken} />
                                )}

                                {modalState.mode === 'transfer' && (
                                    <TransferModalContent 
                                        ticket={currentTicket} 
                                        closeModal={closeModal} 
                                        handleTransfer={handleTransfer} 
                                    />
                                )}
                            </div>
                        </div>
                    )}

                    {/* -------------------- */}
                    {/* 5. Toast Notification */}
                    {/* -------------------- */}
                    <div 
                        className={`fixed top-5 right-5 z-50 transition-all duration-300 ease-in-out transform ${toast.isVisible ? 'translate-y-0 opacity-100' : 'translate-y-full opacity-0'}`}
                    >
                        <div 
                            className={`p-4 rounded-lg shadow-xl text-white flex items-center min-w-[250px] ${toast.isError ? 'bg-red-500' : 'bg-green-500'}`}
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                                {toast.isError ? (
                                    <path strokeLinecap="round" strokeLinejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                ) : (
                                    <path strokeLinecap="round" strokeLinejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                )}
                            </svg>
                            <p className="font-semibold">{toast.message}</p>
                        </div>
                    </div>
                    
                </div>
            );
        };

        // Renderizar el componente principal en el DOM
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
