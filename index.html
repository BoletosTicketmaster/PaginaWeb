<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticketmaster SafeTix‚Ñ¢ - App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; }

        /* Ocultar scrollbar estilo iOS */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* peque√±o helper para suavizar transici√≥n del carousel */
        .scroll-smooth { scroll-behavior: smooth; }

        /* estilos para el indicador (dots) */
        .dot { height: 8px; border-radius: 9999px; transition: all 220ms ease; }
    @keyframes scan {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(300%); }
}
</style>
</head>
<body class="bg-neutral-100">

<div id="root"></div>

<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
// Nota: mantuve todo dentro de este script para que puedas pegarlo directo en el canvas
const { useState, useEffect, useCallback, useRef } = React;

// --- DATA INICIAL ---
const initialTickets = [
  { id: 1, title: "Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025", section: "GRAL-B", row: "G6", seat: "-", date: "21 Dic 2025", venue: "Estadio GNP Seguros ‚Ä¢ Ciudad de M√©xico", time: "8:00 PM", transferred: false, thumbnail: "https://i.imgur.com/RdXsa4O.jpeg", fullImage: "https://i.imgur.com/ucA8GGo.jpeg" },
  { id: 2, title: "Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025", section: "GRAL-B", row: "G6", seat: "-", date: "21 Dic 2025", venue: "Estadio GNP Seguros ‚Ä¢ Ciudad de M√©xico", time: "8:00 PM", transferred: false, thumbnail: "https://i.imgur.com/RdXsa4O.jpeg", fullImage: "https://i.imgur.com/ucA8GGo.jpeg" },
  { id: 3, title: "Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025", section: "GRAL-B", row: "G6", seat: "-", date: "21 Dic 2025", venue: "Estadio GNP Seguros ‚Ä¢ Ciudad de M√©xico", time: "8:00 PM", transferred: false, thumbnail: "https://i.imgur.com/RdXsa4O.jpeg", fullImage: "https://i.imgur.com/ucA8GGo.jpeg" },
  { id: 4, title: "Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025", section: "GRAL-B", row: "G6", seat: "-", date: "21 Dic 2025", venue: "Estadio GNP Seguros ‚Ä¢ Ciudad de M√©xico", time: "8:00 PM", transferred: true, thumbnail: "https://i.imgur.com/RdXsa4O.jpeg", fullImage: "https://i.imgur.com/ucA8GGo.jpeg" }
];

const appTabs = [
  { id: "entradas", name: "Detalles" },
  { id: "pase-lote", name: "Boletos" },
  { id: "informacion", name: "Informaci√≥n" },
  { id: "fechas", name: "Fechas" },
  { id: "artista", name: "Artista" },
  { id: "mi-cuenta", name: "Mi Cuenta" }
];

const mockUser = {
  name: "Alejandro Adame Nettel",
  email: "aleadamenet91@gmail.com",
  memberSince: "Miembro desde 2015",
  membership: "Fan Premium",
  avatar: "https://placehold.co/128x128/3b82f6/ffffff?text=AA"
};

// --- HELPERS ---
const getQrUrl = (ticketId, seat, qrToken) => {
  const data = `TICKET-${ticketId}-${seat}-${encodeURIComponent(qrToken)}`;
  const colorChange = Math.floor(Math.random() * 4);
  const colors = ['ffffff', 'f9f9f9', 'f0f0f0', 'e9e9e9'];
  return `https://api.qrserver.com/v1/create-qr-code/?size=260x40&data=${encodeURIComponent(data)}&bgcolor=${colors[colorChange]}`;
};

// Dynamic QR (img-based to avoid canvas/ref issues)
function DynamicQrCode({ ticket, qrToken, isBatchPass = false, hidden = false }){
  const [url, setUrl] = useState(getQrUrl(ticket.id || 'na', ticket.seat || '-', qrToken));
  useEffect(() => setUrl(getQrUrl(ticket.id || 'na', ticket.seat || '-', qrToken)), [ticket.id, ticket.seat, qrToken]);

  // scannerLine only when not hidden
  const scannerLine = (!hidden) ? (<div className="absolute top-0 left-0 h-full w-1/3 bg-blue-500 opacity-60 animate-[scan_2s_linear_infinite]"></div>) : null;

  // If hidden, render an empty invisible box to preserve layout
  if (hidden) {
    return (
      <div className="flex flex-col items-center justify-center p-1">
        <div className="w-72 h-10 bg-white p-1 rounded-md border border-gray-100 shadow-md relative overflow-hidden opacity-0" aria-hidden="true" />
      </div>
    );
  }

  return (
    <div className="flex flex-col items-center justify-center p-1">
      <div className="w-56 h-10 bg-white p-1 rounded-md border border-gray-100 shadow-md relative overflow-hidden">
        <img src={url} alt="qr" className="w-full h-full object-cover" />
        {scannerLine}
      </div>
    </div>
  );
}

// View modal content
function ViewModalContent({ ticket, closeModal, qrToken }){
  return (
    <div>
      <h3 className="text-center font-bold text-xl text-blue-700 pt-2 mb-4">¬°Tu Entrada!</h3>
      <div className="w-full bg-blue-600 text-white text-center py-5 rounded-md mb-3 mt-4 shadow-lg shadow-blue-200">
        <div className="grid grid-cols-3 gap-4">
          <div><p className="text-xs opacity-80">SEC</p><p className="text-lg font-bold">{ticket.section}</p></div>
          <div><p className="text-xs opacity-80">FILA</p><p className="text-lg font-bold">{ticket.row}</p></div>
          <div><p className="text-xs opacity-80">ASIENTO</p><p className="text-lg font-bold">{ticket.seat}</p></div>
        </div>
      </div>

      <div className="relative h-36 w-full overflow-hidden rounded-md my-4 shadow-lg">
  <img src={"https://i.imgur.com/RdXsa4O.jpeg"} alt="Evento" className="w-full h-full object-cover" onError={(e)=>{e.target.onerror=null;e.target.src='https://placehold.co/300x120/2563eb/ffffff?text=EVENTO';}} />
  <div className="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>
  <div className="absolute bottom-3 left-1/2 -translate-x-1/2 text-center px-3 w-full z-10">
    <p className="text-[15px] font-semibold text-white leading-snug tracking-tight drop-shadow-md line-clamp-2">{ticket.title}</p>
    <p className="text-[13px] text-neutral-200 mt-1 leading-snug tracking-tight drop-shadow line-clamp-1">{ticket.date} ¬∑ {ticket.venue}</p>
  </div>
</div>

      <div className="flex justify-center"><DynamicQrCode ticket={ticket} qrToken={qrToken} /></div>

      <div className="mt-4 flex justify-center">
        <button onClick={closeModal} className="bg-gray-200 text-gray-800 px-6 py-2.5 rounded-md font-medium hover:bg-gray-300 transition w-full max-w-xs">Cerrar vista</button>
      </div>
    </div>
  );
}


// NEW: Details modal for transferred tickets
function DetailsModalContent({ ticket, closeModal }){
  return (
    <div className="space-y-5">
      <h3 className="text-center font-extrabold text-2xl text-blue-700 mb-2 tracking-tight">Boleto transferido</h3>

      {/* Tarjeta estilo boleto */}
      <div className="bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden relative">
        {/* Banda superior */}
        <div className="bg-blue-600 text-white py-4 px-5 text-center">
          <p className="text-xs opacity-80">Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025</p>
          <p className="text-xs opacity-80">Estadio GNP Seguros CDMX</p>
          <p className="font-bold text-lg mt-1">Boleto Digital Transferido</p>
        </div>

        {/* Secci√≥n del destinatario */}
        <div className="px-5 py-4 flex gap-4 items-center">
          <img src={ticket.thumbnail} className="w-20 h-20 object-cover rounded-lg shadow-md" />
          <div className="flex-1 text-sm">
            <p className="font-bold text-gray-800 mb-1">Enviaste un boleto To</p><p className="text-gray-700 font-medium">{ticket.recipientName}</p>
            <p className="text-gray-500 text-xs mt-1">{ticket.recipientEmail}</p>
          </div>
        </div>

        {/* L√≠nea perforada */}
        <div className="border-t border-dashed border-gray-300 mx-5"></div>

        {/* Informaci√≥n del boleto */}
        <div className="px-5 py-4 grid grid-cols-3 text-center">
          <div>
            <p className="text-[10px] opacity-60">SEC</p>
            <p className="font-bold text-lg text-gray-800">{ticket.section}</p>
          </div>
          <div>
            <p className="text-[10px] opacity-60">FILA</p>
            <p className="font-bold text-lg text-gray-800">{ticket.row}</p>
          </div>
          <div>
            <p className="text-[10px] opacity-60">ASIENTO</p>
            <p className="font-bold text-lg text-gray-800">{ticket.seat}</p>
          </div>
        </div>

        {/* Estado de transferencia */}
        <div className="flex items-center gap-2 text-green-600 font-semibold px-5 pb-5">
          <div className="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white text-sm shadow-md">‚úì</div>
          Transferencia completada
        </div>
      </div>

      {/* Bot√≥n cerrar */}
      <button onClick={closeModal} className="w-full bg-neutral-200 py-3 rounded-xl font-semibold hover:bg-neutral-300 transition shadow-md">
        Cerrar
      </button>
    </div>
  );
}

function TransferModalContent({ ticket, closeModal, handleTransfer }){
  const handleSubmit = (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    handleTransfer(Object.fromEntries(formData.entries()));
  };

  return (
    <form onSubmit={handleSubmit}>
      <p className="text-center font-bold text-blue-700 mb-4 text-xl mt-2">Transferir boleto</p>
      <div className="bg-blue-50 border border-blue-100 rounded-lg p-3 mb-4 text-sm flex gap-3 items-start">
        <img src={ticket.thumbnail} alt="thumbnail" className="w-16 h-16 object-cover rounded bg-gray-200" onError={(e)=>{e.target.onerror=null;e.target.src='https://placehold.co/64x64/2563eb/ffffff?text=BB';}} />
        <div>
          <p className="font-bold text-gray-900">{ticket.title}</p>
          <p className="text-xs text-gray-600 mt-1">{ticket.date} ‚Ä¢ {ticket.time}</p>
          <p className="text-xs font-semibold text-blue-700 mt-1">SEC {ticket.section} ‚Ä¢ FILA {ticket.row} ‚Ä¢ Asiento {ticket.seat}</p>
        </div>
      </div>

      <div className="space-y-3">
        <div className="grid grid-cols-2 gap-3">
          <input name="firstName" placeholder="Nombre" required className="w-full border border-gray-300 rounded-md p-2.5 focus:ring-2 focus:ring-blue-500 outline-none text-sm" />
          <input name="apellidoP" placeholder="Apellido Paterno" required className="w-full border border-gray-300 rounded-md p-2.5 focus:ring-2 focus:ring-blue-500 outline-none text-sm" />
        </div>
        <input name="apellidoM" placeholder="Apellido Materno" required className="w-full border border-gray-300 rounded-md p-2.5 focus:ring-2 focus:ring-blue-500 outline-none text-sm" />
        <input type="email" name="transferEmail" placeholder="Correo electr√≥nico del destinatario" required className="w-full border border-gray-300 rounded-md p-2.5 focus:ring-2 focus:ring-blue-500 outline-none text-sm" />
      </div>

      <div className="mt-6 flex gap-3">
        <button type="submit" className="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2.5 rounded-md font-semibold transition shadow-md shadow-blue-300">Transferir ahora</button>
        <button type="button" onClick={closeModal} className="flex-1 bg-white border border-gray-300 text-gray-700 py-2.5 rounded-md font-medium hover:bg-gray-50 transition">Cancelar</button>
      </div>
    </form>
  );
}

// Ticket card (lista) ‚Äî no refs passed to this functional component
function TicketCard({ t, openModal }){
  const isTransferred = !!t.transferred;
  return (
    <div className={`bg-white rounded-xl shadow-md p-4 flex items-center gap-4 transition-transform duration-300 hover:scale-105 ${isTransferred? 'opacity-60':''}`}>
      <img src={t.thumbnail} alt={t.title} className="w-20 h-20 object-cover rounded-md border" onError={(e)=>{e.target.onerror=null;e.target.src='https://placehold.co/80x80/2563eb/ffffff?text=BB';}} />
      <div className="flex-1">
        <p className="text-xs font-bold text-blue-700">SEC {t.section} ‚Ä¢ FILA {t.row} ‚Ä¢ ASIENTO {t.seat}</p>
        <p className="text-sm font-semibold line-clamp-2">{t.title}</p>
        <p className="text-xs opacity-70">{t.date} ‚Ä¢ {t.time}</p>
        <p className="text-xs opacity-70">{t.venue}</p>
        <div className="mt-1 flex flex-col gap-2 items-start">
  {isTransferred && (
    <div className="w-full">
      <div className="flex items-center gap-2 text-green-600 text-xs font-semibold mb-1">
        <div className="w-4 h-4 rounded-full bg-green-500 flex items-center justify-center text-white text-[10px]">‚úì</div>
        Enviaste un boleto a {t.recipientName} ({t.recipientEmail})
      </div>
    </div>
  )}
</div>
      </div>
      <div className="flex flex-col gap-2 min-w-[85px]">
        {isTransferred ? (
          <div className="text-center space-y-2">
  <span className="text-gray-500 text-sm font-semibold block px-2 py-1 rounded-md bg-gray-200 cursor-not-allowed">Ver boleto</span>
  <button onClick={()=>openModal(t.id,'details')} className="text-blue-600 text-sm font-semibold hover:bg-blue-50 py-1 rounded transition w-full">Detalles</button>
  <span className="text-gray-500 text-sm font-medium block px-3 py-1 rounded-md bg-gray-200 cursor-not-allowed">Transferir</span>
</div>
        ) : (
          <>
            <button onClick={()=>openModal(t.id,'view')} className="text-blue-600 text-sm font-semibold hover:bg-blue-50 py-1 rounded transition">Ver boleto</button>
            <button onClick={()=>openModal(t.id,'transfer')} className="bg-gray-100 text-sm px-3 py-1 rounded-md hover:bg-gray-200 transition text-gray-700">Transferir</button>
          </>
        )}
      </div>
    </div>
  );
}

// --- APP ---
function App(){
  const [tickets, setTickets] = useState(initialTickets);
  const [activeTab, setActiveTab] = useState('entradas');
  const [modalState, setModalState] = useState({ isOpen:false, ticketId:null, mode:null });
  const [qrToken, setQrToken] = useState(()=>Date.now().toString(36));
  const [toast, setToast] = useState({ message:'', isError:false, isVisible:false });

  const publicBatchImageUrl = 'https://i.imgur.com/RdXsa4O.jpeg';

  useEffect(()=>{
    const interval = setInterval(()=> setQrToken(Date.now().toString(36)+Math.random().toString(36).slice(2)), 5000);
    return ()=> clearInterval(interval);
  },[]);

  const triggerToast = useCallback((message, isError=false)=>{
    setToast({ message, isError, isVisible:true });
    setTimeout(()=> setToast(prev=> ({...prev, isVisible:false})), 3000);
  },[]);

  const openModal = (id, mode='view')=>{
    const ticket = tickets.find(x=>x.id===id);
    if(!ticket){ triggerToast('Boleto no encontrado', true); return; }
    // permitir abrir el modal 'details' incluso si ya fue transferido
    if(ticket.transferred && mode!=='details'){ triggerToast('Este boleto ya fue transferido. No puedes verlo ni transferirlo de nuevo.', true); return; }
    setModalState({ isOpen:true, ticketId:id, mode });
  };
  const closeModal = ()=> setModalState({ isOpen:false, ticketId:null, mode:null });

  const handleTransfer = (formData)=>{
    const { firstName, apellidoP, apellidoM, transferEmail } = formData;
    const ticketId = modalState.ticketId;
    const re = /^\S+@\S+\.\S+$/;
    if(!firstName||!apellidoP||!apellidoM||!transferEmail){ triggerToast('Por favor completa todos los campos.', true); return; }
    if(!re.test(transferEmail)){ triggerToast('Por favor ingresa un correo v√°lido.', true); return; }
    setTickets(prev=> prev.map(t=> t.id===ticketId ? { ...t, transferred:true, recipientName:`${firstName} ${apellidoP} ${apellidoM}`, recipientEmail:transferEmail } : t));
    triggerToast('Boleto transferido correctamente ‚úì');
    closeModal();
  };

  // Carousel state & ref (for Pase de Lote)
  const carouselRef = useRef(null);
  const [activeIndex, setActiveIndex] = useState(0);

  const handleScroll = () => {
    if(!carouselRef.current) return;
    const scrollLeft = carouselRef.current.scrollLeft;
    const width = carouselRef.current.firstChild?.offsetWidth || 1;
    setActiveIndex(Math.round(scrollLeft / (width + 16)));
  };

  // Entradas tab
  const renderEntradasTab = ()=> (
    <div className="grid gap-4">
      {tickets.map(t=> (
        <TicketCard key={t.id} t={t} openModal={openModal} />
      ))}
    </div>
  );

  // Pase de Lote tab (carousel horizontal)
  // >>> POSICIONADO AQU√ç: Punto de edici√≥n solicitado por el usuario ‚Äî 'Pase de lote' / renderPaseDeLoteTab
  const renderPaseDeLoteTab = ()=>{
    const availableTickets = tickets.filter(t=> !t.transferred);
    const content = availableTickets.length===0 ? (
      <div className="bg-white p-8 rounded-xl shadow-lg border-l-8 border-yellow-500 text-center">
        <p className="text-2xl mb-3">üëã</p>
        <h3 className="text-xl font-bold text-gray-800 mb-2">¬°Todos tus boletos han sido transferidos!</h3>
        <p className="text-gray-600 text-sm">Los boletos transferidos no aparecen en la vista "Pase de Lote" para evitar confusiones en la entrada.<br/>Puedes consultar su estado en la pesta√±a <strong>Entradas</strong> (con la etiqueta <strong>TRANSFERIDO</strong>).</p>
      </div>
    ) : (
      <div className="relative max-w-[360px] mx-auto">
        <div ref={carouselRef} onScroll={handleScroll} className="flex gap-6 overflow-x-auto pr-20 snap-x snap-mandatory scroll-smooth no-scrollbar pb-6 px-2 select-none">
          {/* Flechas solo desktop */}
        <button
          onClick={() => {
            if (!carouselRef.current) return;
            const w = carouselRef.current.firstChild?.offsetWidth || 280;
            carouselRef.current.scrollBy({ left: -w, behavior: 'smooth' });
          }}
          className="hidden md:flex items-center justify-center absolute -left-10 top-1/2 -translate-y-1/2 w-9 h-9 rounded-full bg-white shadow-lg hover:bg-gray-100 transition"
        >‚Äπ</button>
        <button
          onClick={() => {
            if (!carouselRef.current) return;
            const w = carouselRef.current.firstChild?.offsetWidth || 280;
            carouselRef.current.scrollBy({ left: w, behavior: 'smooth' });
          }}
          className="hidden md:flex items-center justify-center absolute -right-10 top-1/2 -translate-y-1/2 w-9 h-9 rounded-full bg-white shadow-lg hover:bg-gray-100 transition"
        >‚Ä∫</button>

        {availableTickets.map((t)=> (
            <div key={t.id} className="w-[260px] sm:w-[220px] min-h-auto flex-shrink-0 snap-center bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 flex flex-col">

              {/* BLOQUE AZUL INFO DEL BOLETO */}
              <div className="w-full bg-blue-600 text-white text-center py-3 px-2">
                <p className="text-xs font-semibold mb-2">Boleto Normal</p>
                <div className="grid grid-cols-3 gap-2">
                  <div><p className="text-[10px] opacity-80">SEC</p><p className="text-sm font-bold">{t.section}</p></div>
                  <div><p className="text-[10px] opacity-80">FILA</p><p className="text-sm font-bold">{t.row}</p></div>
                  <div><p className="text-[10px] opacity-80">ASIENTO</p><p className="text-sm font-bold">{t.seat}</p></div>
                </div>
              </div>

              {/* MINIATURA */}
              <div className="relative h-36 cursor-grab active:cursor-grabbing">
                <img src={publicBatchImageUrl} alt="Evento" className="w-full h-full object-cover" onError={(e)=>{e.target.onerror=null;e.target.src='https://placehold.co/300x120/2563eb/ffffff?text=EVENTO';}} />
                <div className="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent" />
                <div className="absolute z-10 bottom-3 left-1/2 -translate-x-1/2 text-center px-3 w-full">
  <p className="text-[13px] font-semibold text-white leading-snug tracking-tight drop-shadow-md line-clamp-2">Bad Bunny ‚Äî DeB√≠ TiRAR M√°S FOToS World Tour 2025</p>
  <p className="text-[11px] text-neutral-200 mt-1 leading-snug tracking-tight drop-shadow line-clamp-1">dom, 21 Dic de 2025 8:00 ¬∑ Estadio GNP Seguros ¬∑ CDMX</p>
</div>
              </div>

              <div className="flex flex-col justify-center flex-shrink-0 h-[130px] w-full px-4">
  <p className="text-center text-[13px] font-semibold text-gray-700 mb-2">Boleto digital</p>
  <button
    onClick={() => openModal(t.id, 'view')}
    className="mt-3 mx-auto block w-full bg-black text-white rounded-xl py-1.5 px-2 flex items-center justify-center gap-3 font-semibold text-sm tracking-wide shadow-lg hover:bg-neutral-900 active:scale-[0.98] transition-all"
  >
    <span className="inline-flex items-center justify-center w-6 h-6 border border-white/40 rounded-md text-xs">‚ñ£</span>
    Ver entradas
  </button>

  <div className="hidden">
    <DynamicQrCode ticket={t} qrToken={qrToken} isBatchPass={true} hidden={true} />
  </div>
</div>

              <div className="text-center mt-1 mb-2">
                <p className="text-[13px] font-bold text-red-500">SafeTix‚Ñ¢</p>
                <p className="text-[9px] text-gray-600">No se permiten capturas de pantalla</p>
              </div>

              <div className="mt-auto p-3">
                <button onClick={()=>openModal(t.id,'transfer')} className="w-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold py-2 rounded-lg shadow-md transition">Transferir</button>
              </div>

            </div>
          ))}
        </div>

        {/* indicadores (dots) */}
        <div className="flex justify-center gap-2 mt-4">
          {availableTickets.map((_,i)=> (
            <span key={i} className={`dot ${i===activeIndex? 'bg-blue-600 w-5':'bg-gray-300 w-2'}`} />
          ))}
        </div>
      </div>
    );

    // legend
    const legend = (
      <div className="mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200 text-center shadow-inner">
        <p className="text-sm font-medium text-blue-800">Solo se muestran los boletos <strong>Activos</strong> y <strong>No Transferidos</strong>. Consulta la pesta√±a Entradas para ver el estado de todos tus boletos, incluyendo los transferidos.</p>
      </div>
    );

    return (
      <>
        {content}
        {availableTickets.length>0 && legend}
      </>
    );
  };

  const renderMiCuentaTab = ()=>{
    const accountLinks = [
      { icon: '‚öôÔ∏è', name: 'Configuraci√≥n de Perfil', description: 'Actualiza tu nombre, contrase√±a y preferencias.' },
      { icon: 'üí≥', name: 'M√©todos de Pago', description: 'Gestiona tarjetas de cr√©dito y d√©bito.' },
      { icon: 'üìç', name: 'Direcciones Guardadas', description: 'Administra tus domicilios de facturaci√≥n y env√≠o.' },
      { icon: '‚ù§Ô∏è', name: 'Artistas Favoritos', description: 'Personaliza alertas y recomendaciones.' },
      { icon: 'üîí', name: 'Privacidad y Seguridad', description: 'Revisa tus permisos y la seguridad de tu cuenta.' }
    ];

    return (
      <div className="max-w-xl mx-auto space-y-6">
        <div className="flex flex-col items-center p-6 bg-white rounded-xl shadow-lg border-t-4 border-blue-600">
          <img src={mockUser.avatar} alt="Avatar" className="w-24 h-24 rounded-full object-cover ring-4 ring-blue-100" />
          <h3 className="text-2xl font-bold mt-3 text-gray-900">{mockUser.name}</h3>
          <p className="text-sm text-gray-500">{mockUser.email}</p>
          <div className="flex gap-3 mt-3">
            <span className="bg-blue-600 text-white text-xs font-semibold px-3 py-1 rounded-full shadow-md">{mockUser.membership}</span>
            <span className="bg-gray-100 text-gray-600 text-xs px-3 py-1 rounded-full">{mockUser.memberSince}</span>
          </div>
        </div>

        <div className="bg-white rounded-xl shadow-lg divide-y divide-gray-100">
          {accountLinks.map((link,idx)=> (
            <div key={idx} className="flex items-center p-4 hover:bg-gray-50 transition cursor-pointer" onClick={()=>triggerToast(`Abriendo ${link.name}...`)}>
              <div className="text-2xl mr-4">{link.icon}</div>
              <div className="flex-1">
                <p className="font-semibold text-gray-800">{link.name}</p>
                <p className="text-xs text-gray-500">{link.description}</p>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path strokeLinecap="round" strokeLinejoin="round" d="M9 5l7 7-7 7" /></svg>
            </div>
          ))}
        </div>

        <button onClick={()=>triggerToast("¬°Sesi√≥n cerrada! Te extra√±aremos.", true)} className="w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-3 rounded-xl transition shadow-lg shadow-red-200">Cerrar Sesi√≥n</button>
        <div className="text-center pt-2 text-xs text-gray-500">Versi√≥n 3.5.1</div>
      </div>
    );
  };

  const renderSimulatedTab = ()=>{
    switch(activeTab){
      case 'informacion':
        return (<div className="p-6 bg-white rounded-xl shadow"><h2 className="text-xl font-semibold mb-3">Informaci√≥n del Evento</h2><ul className="text-sm text-gray-700 space-y-2 list-disc list-inside"><li>El acceso se abre a las 7:00 PM.</li><li>Prohibido el acceso con c√°maras profesionales o tablets.</li><li>Todos los boletos son SafeTix‚Ñ¢ y requieren escaneo digital.</li><li>Usa la opci√≥n de "Transferir" si el boleto no es para tu uso.</li></ul></div>);
      case 'fechas':
        return (<div className="p-6 bg-white rounded-xl shadow"><h2 className="text-xl font-semibold mb-3">Fechas</h2><ul className="mt-3 text-sm text-gray-700 space-y-2"><li className="font-medium">üìç Ciudad de M√©xico ‚Äî Estadio GNP Seguros ‚Äî 15 Dic 2025 ‚Äî 9:00 PM</li><li className="font-medium">üìç Ciudad de M√©xico ‚Äî Estadio GNP Seguros ‚Äî 19 Dic 2025 ‚Äî 9:00 PM</li><li className="text-gray-500">üìç Monterrey ‚Äî Estadio BBVA ‚Äî 10 Ene 2026 ‚Äî 8:30 PM (Agotado)</li></ul></div>);
      case 'artista':
        return (<div className="p-6 bg-white rounded-xl shadow"><h2 className="text-xl font-semibold mb-3">Artista</h2><p className="text-sm text-gray-700">Bad Bunny, cuyo nombre real es Benito Antonio Mart√≠nez Ocasio, es un cantante, rapero y compositor puertorrique√±o. Se ha consolidado como uno de los artistas m√°s influyentes de la m√∫sica latina actual, rompiendo r√©cords mundiales con su estilo √∫nico que fusiona el trap latino, el reguet√≥n y el pop.</p></div>);
      default: return null;
    }
  };

  const renderAppContent = ()=>{
    switch(activeTab){
      case 'entradas': return renderEntradasTab();
      case 'pase-lote': return renderPaseDeLoteTab();
      case 'mi-cuenta': return renderMiCuentaTab();
      default: return renderSimulatedTab();
    }
  };

  const currentTicket = tickets.find(t=> t.id===modalState.ticketId);
  let mainTitle = 'Tus boletos individuales';
  if(activeTab==='pase-lote') mainTitle = 'Mis Boletos';
  else if(activeTab==='mi-cuenta') mainTitle = 'Gesti√≥n de Cuenta y Perfil';
  else if(activeTab!=='entradas') mainTitle = 'Detalles';

  return (
    <div className="min-h-screen bg-neutral-100 text-black">
      <div className="w-full bg-neutral-900 text-white px-4 pt-2 pb-3 border-b border-neutral-800 select-none shadow-lg sticky top-0 z-50">
        <div className="flex items-center justify-between mb-2">
          <div className="flex items-center gap-2"><div className="w-3 h-3 bg-red-500 rounded-full"/><div className="w-3 h-3 bg-yellow-500 rounded-full"/><div className="w-3 h-3 bg-green-500 rounded-full"/></div>
          <button className="px-3 py-1 text-xs bg-neutral-700/60 rounded">üåì Modo</button>
        </div>

        <div className="flex items-center gap-2 mb-2">
          <div className="flex items-center bg-neutral-800 text-neutral-300 text-sm py-1 px-3 rounded-md w-full">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 text-green-400 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path strokeLinecap="round" strokeLinejoin="round" d="M12 15v2m-6-4h.01M5 10v2a1 1 0 001 1h12a1 1 0 001-1v-2h-.01"/></svg>
            <span className="text-neutral-200">{`https://www.ticketmaster.com.mx/bad-bunny-boletos/artist/2317395/${activeTab}`}</span>
          </div>
        </div>

        <div className="flex items-center gap-2 overflow-x-auto pb-1">
          {appTabs.map(tab=> (
            <div key={tab.id} onClick={()=>setActiveTab(tab.id)} className={`flex items-center gap-2 px-4 py-1.5 rounded-t-lg cursor-pointer text-sm ${tab.id===activeTab? 'bg-neutral-800 text-white font-semibold':'bg-neutral-700/40 text-neutral-300'}`}>
              {tab.name}
            </div>
          ))}
        </div>
      </div>

      <img src="https://i.imgur.com/1rcEy4K.jpeg" className="w-full h-auto object-cover shadow-md" />

      <header className="w-full header-bg text-white pb-6 shadow-md">
       
      </header>

      <main className="max-w-6xl mx-auto p-4 md:p-5">
        <h2 className="text-2xl font-bold text-gray-900 mb-6 border-b border-gray-200 pb-2">{mainTitle}</h2>
        {renderAppContent()}
      </main>

      {modalState.isOpen && currentTicket && (
        <div className="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-start justify-center p-4 overflow-y-auto">
          <div className="bg-white rounded-xl shadow-2xl p-6 w-full max-w-md my-8 relative transform transition-all duration-300 scale-100 ease-out">
            <button onClick={closeModal} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600">‚úï</button>
            {modalState.mode==='view' && <ViewModalContent ticket={currentTicket} closeModal={closeModal} qrToken={qrToken} />}
            {modalState.mode==='transfer' && <TransferModalContent ticket={currentTicket} closeModal={closeModal} handleTransfer={handleTransfer} />}
            {modalState.mode==='details' && <DetailsModalContent ticket={currentTicket} closeModal={closeModal} />}
          </div>
        </div>
      )}

      <div className={`fixed top-5 right-5 z-50 transition-all duration-300 ease-in-out transform ${toast.isVisible? 'translate-y-0 opacity-100':'translate-y-full opacity-0'}`}>
        <div className={`p-4 rounded-lg shadow-xl text-white flex items-center min-w-[250px] ${toast.isError? 'bg-red-500':'bg-green-500'}`}>
          <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>{toast.isError? (<path strokeLinecap="round" strokeLinejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>):(<path strokeLinecap="round" strokeLinejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>)} </svg>
          <p className="font-semibold">{toast.message}</p>
        </div>
      </div>
    </div>
  );
}

// Render
const container = document.getElementById('root');
const root = ReactDOM.createRoot(container);
root.render(<App />);
</script>
</body>
</html>





